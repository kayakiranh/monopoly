$(document).ready(function () { let t = [], a = $("#dice__cube"), e = 1e3 * a.css("transition-duration").split(",")[0].replace(/[^-\d\.]/g, ""); function i(i) { let n = a.attr("class").split(" ")[0], l = "show-" + i; a.removeClass(), n == l ? (a.addClass(l + " show-same"), setTimeout(function () { a.removeClass("show-same") }, e)) : a.addClass(l), t.push(i) } function n(t, a, e) { let i = $("#dice__audio")[0]; "1" == e ? i = $("#corner__audio")[0] : "0" == t && "0" == a ? i = $("#luck__audio")[0] : "-1" == t && "-1" == a ? i = $("#dice__audio")[0] : parseInt(t) > 0 || parseInt(a) > 0 ? i = $("#positive__audio")[0] : 0 > parseInt(t) || 0 > parseInt(a) ? i = $("#negative__audio")[0] : "50" == t && "20" == a && (i = $("#start__audio")[0]), i.pause(), i.currentTime = 0, i.play() } function l() { setTimeout(function () { $("div.card-container div.card").css("transform", "rotateY(0deg)"), $("div.back").data("hp", -10), $("div.back").data("tl", -10), $("div.back").data("text", "Şans kartı se\xe7iminde değilsin. Şansını \xf6nceden g\xf6rmeye \xe7alıştığın i\xe7in -10 HP cezalandırıldın."), $("div.back").text("Şans kartı se\xe7iminde değilsin. Şansını \xf6nceden g\xf6rmeye \xe7alıştığın i\xe7in -10 HP cezalandırıldın."), $("#diceArea").addClass("rolling"), $("#diceArea").css("pointer-events", "none"), i("front"), n(-1, -1, 0), setTimeout(function () { i("back"), n(-1, -1, 0), setTimeout(function () { i("right"), n(-1, -1, 0), setTimeout(function () { i("left"), n(-1, -1, 0), setTimeout(function () { i("top"), n(-1, -1, 0), setTimeout(function () { i("bottom"), n(-1, -1, 0), setTimeout(function () { let t = $("#finalHp").text(), e = $("#finalTl").text(), l = Math.floor(6 * Math.random() + 1); a.removeClass(), a.addClass("show-front"), 1 == l ? i("front") : 6 == l ? i("back") : 4 == l ? i("right") : 3 == l ? i("left") : 2 == l ? i("top") : 5 == l && i("bottom"); let d = l, o = $("#totalDice").text(), r = parseInt(o), c = r + parseInt(d); $("#totalDice").text(c); let s = r - 32 * parseInt(Math.floor(r / 32)), p = c - 32 * parseInt(Math.floor(c / 32)); n(-1, -1, 0), $("#lastId").text(p); let f = $("div").find(`[data-id='${p}']`); if ("Şans Kartı Se\xe7" == f.data("text")) { let _ = [{ hp: "0", tl: "500", text: "İngiliz turistlere sahte para verdin, 20 pound dolandırdın" }, { hp: "100", tl: "0", text: "Ayakta tedavi edildin, 100 HP yenilendi" }, { hp: "0", tl: "140", text: "Taksici uzun yoldan gitti, 140 ₺ dolandırıldın" }, { hp: "-150", tl: "0", text: "İnşaattaki k\xfcrtlerle kavga ettin, 150 HP dayak yedin" }, { hp: "-40", tl: "0", text: "Trafikte kavga \xe7ıktı, 40 HP dayak yedin" }, { hp: "0", tl: "400", text: "Telefon dolandırıcılığı yaptın, 400 ₺ dolandırıldın" }, { hp: "0", tl: "400", text: "Hastaneye uğradın, 200 HP yenilendi" }], x = _[Math.floor(Math.random() * _.length)]; $("div.back").data("hp", x.hp), $("div.back").data("tl", x.tl), $("div.back").data("text", x.text), $("div.back").text(x.text), $("div.card-container div.card div.front").trigger("click"); let u = $("div.back").data("hp"), h = $("div.back").data("tl"); $("#finalHp").text(parseInt(t) + parseInt(u)), $("#finalTl").text(parseInt(e) + parseInt(h)), f.data("hp", u), f.data("tl", h) } 32 == c || c % 32 == 0 ? ($("#lastPoint").text(0), $("#finalHp").text(parseInt(t) + 50), $("#finalTl").text(parseInt(e) + 20), $("#player").animate({ top: f.data("top"), left: f.data("left") }, 2e3, "linear"), n(0, 0, 0)) : c >= 32 ? ($("#lastPoint").text(p), parseInt(p) < parseInt(s) && ($("#finalHp").text(parseInt(t) + 50), $("#finalTl").text(parseInt(e) + 20)), $("#finalHp").text(parseInt(t) + parseInt(f.data("hp"))), $("#finalTl").text(parseInt(e) + parseInt(f.data("tl"))), $("#player").animate({ top: f.data("top"), left: f.data("left") }, 2e3, "linear"), n(f.data("hp"), f.data("tl"), f.data("corner"))) : ($("#lastPoint").text(p), $("#finalHp").text(parseInt(t) + parseInt(f.data("hp"))), $("#finalTl").text(parseInt(e) + parseInt(f.data("tl"))), $("#player").animate({ top: f.data("top"), left: f.data("left") }, 2e3, "linear"), n(f.data("hp"), f.data("tl"), f.data("corner"))), $("#tarihceLog").append("<p><hr />Zar : " + d + " | Total Zar : " + c + "<br />HP : " + $("#finalHp").text() + " | TL : " + $("#finalTl").text() + "<br />İşlem: " + f.data("text") + "<br />Sonu\xe7 : " + f.data("hp") + " HP, " + f.data("tl") + " ₺</p>"); let k = parseInt($("#finalHp").text()); if (k <= 0) { $("#tarihceLog").empty(), $("#finalHp").text(100), $("#finalTl").text(100), $("#lastPoint").text(0), $("#totalDice").text(0), sansKartiniSifirla(), n(-1, -1, -1), $("#player").animate({ top: "760px", left: "1270px" }, 2e3, "linear"); let v = $("#dead__audio")[0]; v.pause(), v.currentTime = 0, v.play(), alert("dead") } $("#diceArea").removeClass("rolling"), $("#diceArea").css("pointer-events", "auto") }, 1e3) }, 1e3) }, 1e3) }, 1e3) }, 1e3) }, 1e3) }, 1e3) } document.body.onkeyup = function (t) { if (32 == t.keyCode) { let a = $("#diceArea").hasClass("rolling"); !1 === a ? l() : alert("rolling") } }, $("#dice__cube").on("click ", function () { let t = $("#diceArea").hasClass("rolling"); !1 === t ? l() : alert("rolling") }) });